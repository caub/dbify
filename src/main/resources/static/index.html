<!DOCTYPE html>
<html>
<head>
    <title>Hello</title>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript">
    
    /*.
    Requests must have this format: {"method": "...", "args": [...], collection: "..."}
    where "method" and "args" follows the <a href="http://api.mongodb.org/java/current/com/mongodb/DBCollection.html">API</a>
    and "collection" is the Mongo's collection to use ("foo" by default)
    
    post({"method": "insert", "args": [{"hello": 1}]}, function(d){console.log(d)}) // insert an object
    post({"method": "find", "args": [{"hello": 1}]}, function(d){console.log(d)})   // find it
    post({"method": "remove", "args": [{"hello": 1}]}, function(d){console.log(d)}) // remove it   
   
    */

    function post(data, cb){
    	$.ajax({
      	  type: "POST",
      	  url: "http://localhost:8080/mongo",
      	  data: JSON.stringify(data),
      	  success: cb,
      	  contentType : 'application/json',
      	  dataType: 'json'
      	});
    }
    
    $(document).ready(function() {
    	$("button.method").click(function() {
    		var t = this;
    		$(t).next().val("");
           	post({"method": $(this).html(), "args": JSON.parse($(t).prev().val())}, function(d){
           		$(t).next().val(JSON.stringify(d));
           	})
        });
    })
    
    
    </script>
</head>
<body>

<h1>Mongo Cli</h1>
<p>Mongo Cli is a server for executing MongoDB commands in the <a href="http://api.mongodb.org/java/current/com/mongodb/DBCollection.html">Java api</a></p>

<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">find</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">findOne</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">count</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 2}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">count</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">insert</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 2}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">save</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1},{"hello": 2},false,false]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">update</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1},{"$set":{"hello": 2}},false,true]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">update</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 3},{"$set":{"hello": 2}},true,true]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">update</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 1},{"hello": 2}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">findAndModify</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": 2}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">remove</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>
<div>
	<textarea class="input" rows="1" cols="50">[{"hello": {"$exists": true}}]</textarea>
	<button class="method" style="vertical-align: 40%;width:75px">remove</button>
	<textarea class="output" rows="1" cols="60" placeholder="result..."></textarea>
</div>

</body>
</html>